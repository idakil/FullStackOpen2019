(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},21:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),u=n.n(c),o=(n(21),n(3)),i=function(e){var t=e.person,n=e.onClick;return a.a.createElement("li",null,t.name," ",t.number," ",a.a.createElement("button",{onClick:function(){return n(t)}},"delete"),"  ")},l=function(e){var t=e.persons,n=e.onClick;return a.a.createElement("ul",null,t.map((function(e){return a.a.createElement(i,{key:e.name,person:e,onClick:n})})))},s=function(){return a.a.createElement("div",null,"search: ",a.a.createElement("input",{type:"text",placeholder:"Search"}))},m=function(){return a.a.createElement("form",null,a.a.createElement("div",null,"name: ",a.a.createElement("input",{id:"name"})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{id:"number"})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},f=n(2),p=n.n(f),d=n(4),b=n(5),h=n.n(b),v="/api/persons",E={getAll:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.a.get(v),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a.post(v,t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.a.put("".concat(v,"/").concat(t),n),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a.delete("".concat(v,"/").concat(t)),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(e){var t=e.message,n=Object(r.useState)(!1),c=Object(o.a)(n,2),u=c[0],i=c[1],l=t.error;if(Object.values(t).length<1)return null;setTimeout((function(){i(!0)}),3e3);var s=l?"error":"success";return a.a.createElement("div",{style:{display:u?"none":"block"},className:s},t.message)},w=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),i=Object(o.a)(u,2),f=i[0],p=i[1],d=Object(r.useState)(""),b=Object(o.a)(d,2),h=b[0],v=b[1],w=Object(r.useState)([]),O=Object(o.a)(w,2),j=O[0],k=O[1],x=Object(r.useState)({}),y=Object(o.a)(x,2),C=y[0],S=y[1],A=function(){E.getAll().then((function(e){c(e),k(e)}))};Object(r.useEffect)((function(){A()}),[]);return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(g,{message:C}),a.a.createElement("div",{onChange:function(e){var t=n.filter((function(t){return t.name.toLowerCase().indexOf(e.target.value.toLowerCase())>-1}));k(t)}},a.a.createElement(s,null)),a.a.createElement("h2",null,"Add a new"),a.a.createElement("div",{onSubmit:function(e){e.preventDefault();var t={name:f,number:h};n.filter((function(e){return e.name===f})).length>0?function(e){var t;window.confirm("".concat(f," already exists in phonebook, replace the old number with a new one?")),n.forEach((function(e){e.name===f&&(t=e.id)})),E.update(t,e).then((function(e){S({message:"Updated ".concat(f),error:!1}),A()})).catch((function(r){S({message:"Person ".concat(e.name," does not exist"),error:!0}),c(n.filter((function(e){return e.id!==t})))}))}(t):E.create(t).then((function(e){A(),S({message:"Added ".concat(f),error:!1})})).catch((function(e){S({message:e.response.data.error,error:!0})}))},onChange:function(e){"name"===e.target.id?p(e.target.value):v(e.target.value)}},a.a.createElement(m,{newName:f,newNumber:h})),a.a.createElement("h2",null,"Numbers"),a.a.createElement(l,{key:n,persons:j,onClick:function(e){window.confirm("Delete ".concat(e.name," from phonebook?")),E.remove(e.id).then((function(t){S("Deleted ".concat(e.name)),A()})).catch((function(t){console.log(t),S({message:"Person ".concat(e.name," does not exist"),error:!0}),c(n.filter((function(t){return t.id!==e.id}))),alert("Person ".concat(e.name," does not exist"))}))}}))};u.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.ebdf369e.chunk.js.map